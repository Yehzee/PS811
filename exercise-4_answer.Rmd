---
title: 'Exercise 5: Base R vs. Tidyverse'
author: "Dillon Laaker"
date: "10/15/2020"
output:
  html_document:
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

setwd("~/Library/Mobile Documents/com~apple~CloudDocs/1. PS materials/PS 811/Week4_tidyverse and base R")
```


# Base R tasks

1. Download the food_coded.csv file

2. Load the CSV file into your R environment.

    Open the `codebook_food.docx` file for guidance.
    
```{r}
food <- read.csv("food_coded.csv")
```

3. Extract the first 95 rows.
```{r}
food_new <- food[c(1:95),]
```


4. Look at the following variables using both name and column index/number.

    * GPA
    * calories_chicken
    * drink
    * fav_cuisine
    * father_profession
    * mother_profession
    
```{r}
food_select1<- food[, c("GPA", "calories_chicken", "drink", "fav_cuisine", "father_profession", "mother_profession")]

match(c("GPA", "calories_chicken", "drink", "fav_cuisine", "father_profession", "mother_profession"), names(food))

food_select2 <- food[, c(1, 4, 16, 26, 25, 45)]
```


5. Create a new variable for how healthy each person feels but convert the scale from 1 to 10 to 1 to 100.

```{r}
food$healthy_feeling2 <- food$healthy_feeling*10
```

6. Filter to students who are female and have GPAs that are above 3.0.

```{r}
food_filter <- food[food$GPA >= 3.0 & food$Gender=="1", ]
```


7. Find the mean and standard deviation for the following variables, and summarize them in a data frame.

    * chicken_calories
    * tortilla_calories
    * turkey_calories
    * waffle_calories

```{r}
food_select3 <- food[, c("calories_chicken", "tortilla_calories", "turkey_calories", "waffle_calories")]

a<- sapply(food_select3, mean, na.rm = TRUE)
b <- sapply(food_select3, sd, na.rm = TRUE)

summary_food <- as.data.frame(rbind(a, b))
rownames(summary_food) <- c("mean", "standard deviation")
```

8. Summarize GPA and weight within the gender and cuisine variables.
```{r}
food_select4 <- food[, c("Gender", "cuisine", "GPA", "weight")]
food_select4$GPA <- as.numeric(food_select4$GPA)
food_select4$Gender <- as.numeric(food_select4$Gender)
food_select4$cuisine <- as.numeric(food_select4$cuisine)
food_select4$weight <- as.numeric(food_select4$weight)

food_female <- food_select4[food_select4$Gender==1, ]
food_male <- food_select4[food_select4$Gender==2, ]

female_GPA_mean <- as.data.frame(tapply(food_female$GPA, food_female$cuisine, mean, na.rm = T))
female_GPA_sd <- as.data.frame(tapply(food_female$GPA, food_female$cuisine, sd, na.rm = T))
male_GPA_mean <- as.data.frame(tapply(food_male$GPA, food_male$cuisine, mean, na.rm = T))
male_GPA_sd <- as.data.frame(tapply(food_male$GPA, food_male$cuisine, sd, na.rm = T))

female_weight_mean <- as.data.frame(tapply(food_female$weight, food_female$cuisine, mean, na.rm = T))
female_weight_sd <- as.data.frame(tapply(food_female$weight, food_female$cuisine, sd, na.rm = T))
male_weight_mean <- as.data.frame(tapply(food_male$weight, food_male$cuisine, mean, na.rm = T))
male_weight_sd <- as.data.frame(tapply(food_male$weight, food_male$cuisine, sd, na.rm = T))

```




# Tidyverse tasks

1. Download the facebook-fact-check.csv

2. Load the CSV file into your R environment.

```{r}
data <- read.csv("facebook-fact-check.csv")
```

3. Extract the last 500 rows.

    Hint: Check out the [top_n() page](https://rdrr.io/github/YTLogos/dplyr/man/top_n.html) to figure out how to extract the last 500 rows instead of the first 500 rows.
    
```{r}
library(dplyr)
data.new<- top_n(data, n= -500)
```

4. Look at the even-numbered column indices only. Identify them by name.

```{r}
colnames(data)
data_even <- data %>% 
    select(c(2, 4, 6, 8, 10, 12)) ## Select even cols
colnames(data_even)
```


5. Using `mutate`, create a new variable called `post_type_coded` that renames each post type to the following:

    * link = 1
    * photo = 2
    * text = 3
    * video = 4
    
    Hint: look up case_when within tidyverse. You can also use if_else
    
```{r}
data_mutate <- data %>%
    mutate('post_type_coded' = ifelse(Post.Type == 'link', '1',
                              ifelse(Post.Type == 'photo', '2',
                           ifelse(Post.Type == 'text', '3', '4'))))
    
```

    

6. Arrange page names in reverse order.
```{r}
data%>% arrange(desc(Page)) 
#data%>%arrange(Page) : alphabetic order
```
    
    
7. Find the mean and standard deviation for the following variables, and summarize them.

    * share_count
    * reaction_count
    * comment_count

```{r}
data_summary <- data%>%
    summarize(m1 = mean(share_count, na.rm = TRUE), 
              sd1 = sd(share_count, na.rm = TRUE), 
              m2 = mean(reaction_count, na.rm = TRUE), 
              sd2 = sd(reaction_count, na.rm = TRUE),
              m3 = mean(comment_count, na.rm = TRUE), 
              sd3 = sd(comment_count, na.rm = TRUE))

```


8. Summarize the mean and standard deviations in Question 7 with the "mainstream" values in the `category` variable.

```{r}
mainstream_summary <- data%>%
    filter(Category == "mainstream")%>%
    summarize(m_share = mean(share_count, na.rm = TRUE), 
              sd_share = sd(share_count, na.rm = TRUE), 
              m_reaction = mean(reaction_count, na.rm = TRUE), 
              sd_reaction = sd(reaction_count, na.rm = TRUE),
              m_comment = mean(comment_count, na.rm = TRUE), 
              sd_comment = sd(comment_count, na.rm = TRUE))
```


# Submit

Email me (laaker@wisc.edu) the link to your `ps811-exercises` repository when you are done.